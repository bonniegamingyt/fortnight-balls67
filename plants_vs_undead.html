<!DOCTYPE html>
<html>
<head>
  <title>Mini PVZ</title>
  <style>
    body { background: #a3d9a5; font-family: sans-serif; text-align: center; }
    #game { position: relative; width: 600px; height: 400px; margin: 20px auto; background: #88c070; border: 2px solid #333; }
    .plant, .zombie, .bullet { position: absolute; }
    .sunflower { width: 40px; height: 40px; background: yellow; border-radius: 50%; }
    .peashooter { width: 40px; height: 40px; background: green; border-radius: 10%; }
    .icepeashooter { width: 40px; height: 40px; background: cyan; border-radius: 10%; }
    .walnut { width: 40px; height: 40px; background: brown; border-radius: 50%; }
    .zombie { width: 40px; height: 60px; background: gray; }
    .bullet { width: 10px; height: 10px; background: lightgreen; border-radius: 50%; }
  </style>
</head>
<body>
  <h1>Mini Plants vs Zombies</h1>
  <div id="game"></div>
  <button onclick="addPlant('sunflower')">Add Sunflower</button>
  <button onclick="addPlant('peashooter')">Add Peashooter</button>
  <button onclick="addPlant('icepeashooter')">Add Ice Peashooter</button>
  <button onclick="addPlant('walnut')">Add Wall-nut</button>

  <script>
    const game = document.getElementById('game');
    const plants = [];
    const zombies = [];
    const bullets = [];

    function addPlant(type) {
      const plant = document.createElement('div');
      plant.className = type + ' plant';
      plant.style.left = '50px';
      plant.style.top = Math.floor(Math.random() * 360) + 'px';
      plant.hp = type === 'walnut' ? 50 : 10;
      plant.type = type;
      game.appendChild(plant);
      plants.push(plant);
    }

    function spawnZombie() {
      const zombie = document.createElement('div');
      zombie.className = 'zombie';
      zombie.style.left = '560px';
      zombie.style.top = Math.floor(Math.random() * 340) + 'px';
      zombie.hp = 20;
      game.appendChild(zombie);
      zombies.push(zombie);
    }

    function shoot(plant) {
      const bullet = document.createElement('div');
      bullet.className = 'bullet';
      bullet.style.left = parseInt(plant.style.left) + 40 + 'px';
      bullet.style.top = parseInt(plant.style.top) + 15 + 'px';
      bullet.speed = plant.type === 'icepeashooter' ? 2 : 5;
      bullet.damage = plant.type === 'icepeashooter' ? 5 : 10;
      bullet.ice = plant.type === 'icepeashooter';
      game.appendChild(bullet);
      bullets.push(bullet);
    }

    function gameLoop() {
      // Zombies move
      zombies.forEach(z => {
        z.style.left = parseInt(z.style.left) - 1 + 'px';
      });

      // Plants shoot
      plants.forEach(p => {
        if (p.type === 'peashooter' || p.type === 'icepeashooter') {
          if (Math.random() < 0.02) shoot(p);
        }
      });

      // Bullets move
      bullets.forEach((b, i) => {
        b.style.left = parseInt(b.style.left) + b.speed + 'px';
        // Check collision with zombies
        zombies.forEach((z, j) => {
          if (parseInt(b.style.left) + 10 > parseInt(z.style.left) &&
              parseInt(b.style.left) < parseInt(z.style.left) + 40 &&
              parseInt(b.style.top) + 10 > parseInt(z.style.top) &&
              parseInt(b.style.top) < parseInt(z.style.top) + 60) {
            z.hp -= b.damage;
            if (b.ice) z.style.background = 'lightblue';
            game.removeChild(b);
            bullets.splice(i,1);
          }
        });
      });

      // Remove dead zombies
      zombies.forEach((z, i) => {
        if (z.hp <= 0) {
          game.removeChild(z);
          zombies.splice(i,1);
        }
      });

      // Spawn zombies randomly
      if (Math.random() < 0.01) spawnZombie();

      requestAnimationFrame(gameLoop);
    }

    gameLoop();
  </script>
</body>
</html>

